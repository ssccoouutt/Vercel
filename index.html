<!DOCTYPE html>
<html>
<head>
    <title>YouTube Downloads</title>
    <style>
        body { font-family: Arial; max-width: 800px; margin: 0 auto; padding: 20px; }
        .video { background: #f0f0f0; padding: 15px; margin: 10px 0; border-radius: 5px; }
        button { background: #0070f3; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer; }
        .colab-note { background: #fff3cd; padding: 15px; border-radius: 5px; margin: 20px 0; }
    </style>
</head>
<body>
    <h1>üì• YouTube Downloads from Colab</h1>
    
    <div class="colab-note">
        <strong>ü§ñ Colab is processing videos:</strong>
        <p id="colabStatus">Waiting for Colab to send videos...</p>
    </div>
    
    <button onclick="fetchVideos()">üîÑ Refresh</button>
    <div id="videos"></div>

    <script>
        async function fetchVideos() {
            const res = await fetch('/api/webhook');
            const videos = await res.json();
            
            document.getElementById('colabStatus').innerHTML = 
                `üì§ ${videos.length} videos received from Colab`;
            
            const container = document.getElementById('videos');
            if (videos.length === 0) {
                container.innerHTML = '<p>No videos yet. Run Colab notebook first!</p>';
                return;
            }
            
            container.innerHTML = videos.map(v => `
                <div class="video">
                    <strong>${v.video_info?.title || 'Video'}</strong><br>
                    Size: ${v.video_info?.file_size_mb || '?'} MB<br>
                    <a href="/api/webhook?id=${v.id}&download=true">
                        <button>‚¨áÔ∏è Download</button>
                    </a>
                </div>
            `).join('');
        }
        
        fetchVideos();
        setInterval(fetchVideos, 5000);
    </script>
</body>
</html>
